{"version":3,"file":"ErrorDNAVisualizer.js","sourceRoot":"","sources":["ErrorDNAVisualizer.tsx"],"names":[],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport styled from '@emotion/styled';\r\nimport { useTheme } from '@emotion/react';\r\nimport { motion } from 'framer-motion';\r\nimport { Light as SyntaxHighlighter } from 'react-syntax-highlighter';\r\nimport { vs2015 } from 'react-syntax-highlighter/dist/esm/styles/hljs';\r\nimport type { EnhancedErrorDNA } from '../../core/types';\r\nimport type { DependencyGraph } from '../../core/errorDNA/dependencyAnalyzer';\r\nimport { DependencyVisualizer } from './DependencyVisualizer';\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 1rem;\r\n  padding: 1rem;\r\n  background: ${({ theme }) => theme.colors.background.secondary};\r\n  border-radius: 8px;\r\n`;\r\n\r\nconst Header = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n`;\r\n\r\nconst Title = styled.h3`\r\n  margin: 0;\r\n  color: ${({ theme }) => theme.colors.text.primary};\r\n`;\r\n\r\nconst ErrorLocation = styled.div`\r\n  font-family: monospace;\r\n  color: ${({ theme }) => theme.colors.text.secondary};\r\n`;\r\n\r\nconst CodePreview = styled(motion.div)`\r\n  position: relative;\r\n  border-radius: 4px;\r\n  overflow: hidden;\r\n`;\r\n\r\nconst HighlightedLine = styled.div<{ isError?: boolean }>`\r\n  background: ${({ theme, isError }) => isError \r\n    ? theme.colors.error.background \r\n    : theme.colors.highlight.background};\r\n  position: absolute;\r\n  left: 0;\r\n  right: 0;\r\n  height: 1.5rem;\r\n  opacity: 0.3;\r\n`;\r\n\r\ninterface ErrorDNAVisualizerProps {\r\n  errorDNA: EnhancedErrorDNA;\r\n  dependencyGraph?: DependencyGraph;\r\n}\r\n\r\nexport const ErrorDNAVisualizer: React.FC<ErrorDNAVisualizerProps> = ({\r\n  errorDNA,\r\n  dependencyGraph,\r\n}) => {\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    <Container>\r\n      <Header>\r\n        <Title>Error DNA Analysis</Title>\r\n        <ErrorLocation>\r\n          {errorDNA.location.file}:{errorDNA.location.line}\r\n        </ErrorLocation>\r\n      </Header>\r\n\r\n      <CodePreview\r\n        initial={{ opacity: 0, y: 20 }}\r\n        animate={{ opacity: 1, y: 0 }}\r\n        transition={{ duration: 0.3 }}\r\n      >\r\n        {errorDNA.visual.highlightedLines.map(line => (\r\n          <HighlightedLine\r\n            key={line}\r\n            style={{ top: `${(line - 1) * 1.5}rem` }}\r\n            isError={line === errorDNA.location.line}\r\n          />\r\n        ))}\r\n        <SyntaxHighlighter\r\n          language=\"typescript\"\r\n          style={vs2015}\r\n          showLineNumbers\r\n          wrapLines\r\n          customStyle={{\r\n            margin: 0,\r\n            borderRadius: '4px',\r\n            fontSize: '0.9rem',\r\n            background: theme.colors.background.primary,\r\n            color: theme.colors.text.primary,\r\n          }}\r\n        >\r\n          {errorDNA.visual.codePreview}\r\n        </SyntaxHighlighter>\r\n      </CodePreview>\r\n\r\n      {errorDNA.aiAnalysis && (\r\n        <motion.div\r\n          initial={{ opacity: 0 }}\r\n          animate={{ opacity: 1 }}\r\n          transition={{ delay: 0.3 }}\r\n        >\r\n          <h4>AI Analysis</h4>\r\n          <p>{errorDNA.aiAnalysis.explanation}</p>\r\n          {errorDNA.aiAnalysis.suggestedFix && (\r\n            <>\r\n              <h4>Suggested Fix</h4>\r\n              <SyntaxHighlighter\r\n                language=\"typescript\"\r\n                style={vs2015}\r\n                customStyle={{\r\n                  margin: 0,\r\n                  borderRadius: '4px',\r\n                  fontSize: '0.9rem',\r\n                  background: theme.colors.background.primary,\r\n                  color: theme.colors.text.primary,\r\n                }}\r\n              >\r\n                {errorDNA.aiAnalysis.suggestedFix}\r\n              </SyntaxHighlighter>\r\n            </>\r\n          )}\r\n        </motion.div>\r\n      )}\r\n\r\n      {dependencyGraph && (\r\n        <motion.div\r\n          initial={{ opacity: 0 }}\r\n          animate={{ opacity: 1 }}\r\n          transition={{ delay: 0.6 }}\r\n        >\r\n          <h4>Dependency Chain</h4>\r\n          <DependencyVisualizer\r\n            graph={dependencyGraph}\r\n            errorNodeId={errorDNA.location.file}\r\n          />\r\n        </motion.div>\r\n      )}\r\n    </Container>\r\n  );\r\n}; "]}