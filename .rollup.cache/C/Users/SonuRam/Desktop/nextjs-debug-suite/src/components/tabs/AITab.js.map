{"version":3,"file":"AITab.js","sourceRoot":"","sources":["AITab.tsx"],"names":[],"mappings":";AAAA,OAAO,KAAK,EAAE,EAAE,QAAQ,EAAE,MAAM,OAAO,CAAC;AACxC,OAAO,MAAM,MAAM,iBAAiB,CAAC;AACrC,OAAO,EAAE,KAAK,IAAI,iBAAiB,EAAE,MAAM,0BAA0B,CAAC;AACtE,OAAO,EAAE,QAAQ,EAAE,MAAM,gDAAgD,CAAC;AAC1E,OAAO,EAAE,eAAe,EAAE,MAAM,uBAAuB,CAAC;AACxD,OAAO,EAAE,gBAAgB,EAAE,MAAM,kBAAkB,CAAC;AAGpD,IAAM,SAAS,GAAG,MAAM,CAAC,GAAG,qIAAA,kEAI3B,IAAA,CAAC;AAEF,IAAM,UAAU,GAAG,MAAM,CAAC,QAAQ,gXAAA,+EAIZ,EAAkC,0CAExC,EAAsC,cAC3C,EAAgC,oJAQvB,EAAmC,UAEtD,KAbqB,UAAC,EAAS;QAAP,KAAK,WAAA;IAAO,OAAA,KAAK,CAAC,MAAM,CAAC,MAAM;AAAnB,CAAmB,EAExC,UAAC,EAAS;QAAP,KAAK,WAAA;IAAO,OAAA,KAAK,CAAC,MAAM,CAAC,UAAU;AAAvB,CAAuB,EAC3C,UAAC,EAAS;QAAP,KAAK,WAAA;IAAO,OAAA,KAAK,CAAC,MAAM,CAAC,IAAI;AAAjB,CAAiB,EAQvB,UAAC,EAAS;QAAP,KAAK,WAAA;IAAO,OAAA,KAAK,CAAC,MAAM,CAAC,OAAO;AAApB,CAAoB,CAEtD,CAAC;AAEF,IAAM,MAAM,GAAG,MAAM,CAAC,MAAM,oXAAA,gFAIZ,EAAmC,yLAYjC,EAAkC,oCAGnD,KAfe,UAAC,EAAS;QAAP,KAAK,WAAA;IAAO,OAAA,KAAK,CAAC,MAAM,CAAC,OAAO;AAApB,CAAoB,EAYjC,UAAC,EAAS;QAAP,KAAK,WAAA;IAAO,OAAA,KAAK,CAAC,MAAM,CAAC,MAAM;AAAnB,CAAmB,CAGnD,CAAC;AAEF,IAAM,iBAAiB,GAAG,MAAM,CAAC,GAAG,6HAAA,0DAInC,IAAA,CAAC;AAEF,IAAM,YAAY,GAAG,MAAM,CAAC,GAAG,2LAAA,kBACf,EAAyC,yBACnC,EAAkC,yEAIvD,KALe,UAAC,EAAS;QAAP,KAAK,WAAA;IAAO,OAAA,KAAK,CAAC,MAAM,CAAC,aAAa;AAA1B,CAA0B,EACnC,UAAC,EAAS;QAAP,KAAK,WAAA;IAAO,OAAA,KAAK,CAAC,MAAM,CAAC,MAAM;AAAnB,CAAmB,CAIvD,CAAC;AAEF,IAAM,cAAc,GAAG,MAAM,CAAC,GAAG,wMAAA,iDAEJ,EAAkC,kFAI9D,KAJ4B,UAAC,EAAS;QAAP,KAAK,WAAA;IAAO,OAAA,KAAK,CAAC,MAAM,CAAC,MAAM;AAAnB,CAAmB,CAI9D,CAAC;AAEF,IAAM,aAAa,GAAG,MAAM,CAAC,EAAE,yHAAA,+CAGpB,EAAgC,KAC1C,KADU,UAAC,EAAS;QAAP,KAAK,WAAA;IAAO,OAAA,KAAK,CAAC,MAAM,CAAC,IAAI;AAAjB,CAAiB,CAC1C,CAAC;AAEF,IAAM,eAAe,GAAG,MAAM,CAAC,GAAG,yFAAA,sBAEjC,IAAA,CAAC;AAEF,IAAM,SAAS,GAAG,MAAM,CAAC,GAAG,qIAAA,kEAI3B,IAAA,CAAC;AAQF,MAAM,CAAC,IAAM,KAAK,GAAa;;IACrB,IAAA,MAAM,GAAK,eAAe,EAAE,OAAtB,CAAuB;IAC/B,IAAA,KAAoB,QAAQ,CAAC,EAAE,CAAC,EAA/B,KAAK,QAAA,EAAE,QAAQ,QAAgB,CAAC;IACjC,IAAA,KAA4B,QAAQ,CAAC,KAAK,CAAC,EAA1C,SAAS,QAAA,EAAE,YAAY,QAAmB,CAAC;IAC5C,IAAA,KAA4B,QAAQ,CAAe,EAAE,CAAC,EAArD,SAAS,QAAA,EAAE,YAAY,QAA8B,CAAC;IACvD,IAAA,KAAoB,QAAQ,CAAgB,IAAI,CAAC,EAAhD,KAAK,QAAA,EAAE,QAAQ,QAAiC,CAAC;IAExD,IAAM,SAAS,GAAG,gBAAgB,CAAC,WAAW,EAAE,CAAC,UAAU,EAAE,CAAC;IAE9D,IAAM,YAAY,GAAG;;;;;;oBACnB,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,IAAI,CAAC,CAAA,MAAA,MAAM,CAAC,EAAE,0CAAE,OAAO,CAAA,IAAI,CAAC,SAAS;wBAAE,sBAAO;oBAE/D,YAAY,CAAC,IAAI,CAAC,CAAC;oBACnB,QAAQ,CAAC,IAAI,CAAC,CAAC;;;;oBAGY,qBAAM,SAAS,CAAC,OAAO,CAAC;4BAC/C,IAAI,EAAE,SAAS;4BACf,OAAO,EAAE;gCACP,KAAK,OAAA;6BACN;yBACF,CAAC,EAAA;;oBALI,gBAAgB,GAAG,SAKvB;oBAEI,mCACD,gBAAgB,KACnB,IAAI,EAAE,UAAU,EAChB,KAAK,EAAE,aAAa,EACpB,SAAS,EAAE,IAAI,CAAC,GAAG,EAAE,GACtB,CAAC;oBAEF,YAAY,CAAC,UAAA,IAAI,IAAI,sBAAC,UAAQ,GAAK,IAAI,SAAlB,CAAmB,CAAC,CAAC;oBAC1C,QAAQ,CAAC,EAAE,CAAC,CAAC;;;;oBAEb,QAAQ,CAAC,KAAG,YAAY,KAAK,CAAC,CAAC,CAAC,KAAG,CAAC,OAAO,CAAC,CAAC,CAAC,mCAAmC,CAAC,CAAC;oBACnF,OAAO,CAAC,KAAK,CAAC,oBAAoB,EAAE,KAAG,CAAC,CAAC;;;oBAEzC,YAAY,CAAC,KAAK,CAAC,CAAC;;;;;SAEvB,CAAC;IAEF,IAAI,CAAC,CAAA,MAAA,MAAM,CAAC,EAAE,0CAAE,OAAO,CAAA,EAAE,CAAC;QACxB,OAAO,CACL,6BAAK,KAAK,EAAE,EAAE,OAAO,EAAE,EAAE,EAAE,SAAS,EAAE,QAAQ,EAAE,KAAK,EAAE,MAAM,EAAE,sFAEzD,CACP,CAAC;IACJ,CAAC;IAED,IAAI,CAAC,SAAS,EAAE,CAAC;QACf,OAAO,CACL,6BAAK,KAAK,EAAE,EAAE,OAAO,EAAE,EAAE,EAAE,SAAS,EAAE,QAAQ,EAAE,KAAK,EAAE,MAAM,EAAE,oFAEzD,CACP,CAAC;IACJ,CAAC;IAED,OAAO,CACL,oBAAC,SAAS;QACR,oBAAC,UAAU,IACT,KAAK,EAAE,KAAK,EACZ,QAAQ,EAAE,UAAC,CAAC,IAAK,OAAA,QAAQ,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,EAAxB,CAAwB,EACzC,WAAW,EAAC,2EAA2E,GACvF;QACF,oBAAC,MAAM,IACL,OAAO,EAAE,YAAY,EACrB,QAAQ,EAAE,SAAS,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,IAEnC,SAAS,CAAC,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC,SAAS,CAChC;QAER,KAAK,IAAI,CACR,6BAAK,KAAK,EAAE,EAAE,KAAK,EAAE,SAAS,EAAE,MAAM,EAAE,QAAQ,EAAE,OAAO,EAAE,KAAK,EAAE,UAAU,EAAE,SAAS,EAAE,YAAY,EAAE,KAAK,EAAE,IAC3G,KAAK,CACF,CACP;QAED,oBAAC,iBAAiB,QACf,SAAS,CAAC,GAAG,CAAC,UAAC,QAAQ,EAAE,KAAK,IAAK,OAAA,CAClC,oBAAC,YAAY,IAAC,GAAG,EAAE,KAAK;YACtB,oBAAC,cAAc;gBACb,oBAAC,aAAa,QAAE,QAAQ,CAAC,KAAK,CAAiB;gBAC/C,8BAAM,KAAK,EAAE,EAAE,QAAQ,EAAE,EAAE,EAAE,KAAK,EAAE,MAAM,EAAE,IACzC,IAAI,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,kBAAkB,EAAE,CAC7C,CACQ;YACjB,oBAAC,eAAe;gBACd,iCAAM,QAAQ,CAAC,WAAW,CAAO;gBAChC,QAAQ,CAAC,YAAY,IAAI,CACxB,oBAAC,SAAS;oBACR,oBAAC,iBAAiB,IAChB,QAAQ,EAAC,YAAY,EACrB,KAAK,EAAE,QAAQ,EACf,WAAW,EAAE,EAAE,MAAM,EAAE,CAAC,EAAE,IAEzB,QAAQ,CAAC,YAAY,CACJ,CACV,CACb;gBACA,QAAQ,CAAC,iBAAiB,IAAI,MAAM,CAAC,OAAO,CAAC,QAAQ,CAAC,iBAAiB,CAAC,CAAC,GAAG,CAAC,UAAC,EAAY;wBAAX,GAAG,QAAA,EAAE,KAAK,QAAA;oBAAM,OAAA,CAC9F,6BAAK,GAAG,EAAE,GAAG,EAAE,KAAK,EAAE,EAAE,SAAS,EAAE,EAAE,EAAE;wBACrC,4BAAI,KAAK,EAAE,EAAE,MAAM,EAAE,SAAS,EAAE,QAAQ,EAAE,EAAE,EAAE,KAAK,EAAE,MAAM,EAAE,IAC1D,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE,GAAG,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CACxC;wBACL,iCAAM,KAAK,CAAO,CACd,CACP;gBAP+F,CAO/F,CAAC,CACc,CACL,CAChB,EA/BmC,CA+BnC,CAAC,CACgB,CACV,CACb,CAAC;AACJ,CAAC,CAAC","sourcesContent":["import React, { useState } from 'react';\r\nimport styled from '@emotion/styled';\r\nimport { Light as SyntaxHighlighter } from 'react-syntax-highlighter';\r\nimport { tomorrow } from 'react-syntax-highlighter/dist/esm/styles/prism';\r\nimport { useDebugContext } from '../DebugSuiteProvider';\r\nimport { AIServiceManager } from '../../ai/factory';\r\nimport type { AIAnalysisResponse } from '../../ai/types';\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 100%;\r\n`;\r\n\r\nconst QueryInput = styled.textarea`\r\n  width: 100%;\r\n  min-height: 80px;\r\n  padding: 12px;\r\n  border: 1px solid ${({ theme }) => theme.colors.border};\r\n  border-radius: 6px;\r\n  background: ${({ theme }) => theme.colors.background};\r\n  color: ${({ theme }) => theme.colors.text};\r\n  font-family: inherit;\r\n  font-size: 14px;\r\n  resize: vertical;\r\n  margin-bottom: 12px;\r\n\r\n  &:focus {\r\n    outline: none;\r\n    border-color: ${({ theme }) => theme.colors.primary};\r\n  }\r\n`;\r\n\r\nconst Button = styled.button`\r\n  padding: 8px 16px;\r\n  border: none;\r\n  border-radius: 4px;\r\n  background: ${({ theme }) => theme.colors.primary};\r\n  color: white;\r\n  cursor: pointer;\r\n  font-size: 14px;\r\n  transition: all 0.2s;\r\n  align-self: flex-end;\r\n\r\n  &:hover {\r\n    opacity: 0.9;\r\n  }\r\n\r\n  &:disabled {\r\n    background: ${({ theme }) => theme.colors.border};\r\n    cursor: not-allowed;\r\n  }\r\n`;\r\n\r\nconst ResponseContainer = styled.div`\r\n  margin-top: 20px;\r\n  flex: 1;\r\n  overflow-y: auto;\r\n`;\r\n\r\nconst ResponseCard = styled.div`\r\n  background: ${({ theme }) => theme.colors.tabBackground};\r\n  border: 1px solid ${({ theme }) => theme.colors.border};\r\n  border-radius: 6px;\r\n  margin-bottom: 16px;\r\n  overflow: hidden;\r\n`;\r\n\r\nconst ResponseHeader = styled.div`\r\n  padding: 12px;\r\n  border-bottom: 1px solid ${({ theme }) => theme.colors.border};\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n`;\r\n\r\nconst ResponseTitle = styled.h3`\r\n  margin: 0;\r\n  font-size: 14px;\r\n  color: ${({ theme }) => theme.colors.text};\r\n`;\r\n\r\nconst ResponseContent = styled.div`\r\n  padding: 12px;\r\n`;\r\n\r\nconst CodeBlock = styled.div`\r\n  margin: 8px 0;\r\n  border-radius: 4px;\r\n  overflow: hidden;\r\n`;\r\n\r\ninterface AIResponse extends AIAnalysisResponse {\r\n  type: 'analysis' | 'suggestion' | 'documentation';\r\n  title: string;\r\n  timestamp: number;\r\n}\r\n\r\nexport const AITab: React.FC = () => {\r\n  const { config } = useDebugContext();\r\n  const [query, setQuery] = useState('');\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [responses, setResponses] = useState<AIResponse[]>([]);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const aiService = AIServiceManager.getInstance().getService();\r\n\r\n  const handleSubmit = async () => {\r\n    if (!query.trim() || !config.ai?.enabled || !aiService) return;\r\n\r\n    setIsLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const analysisResponse = await aiService.analyze({\r\n        type: 'general',\r\n        context: {\r\n          query,\r\n        },\r\n      });\r\n\r\n      const response: AIResponse = {\r\n        ...analysisResponse,\r\n        type: 'analysis',\r\n        title: 'AI Analysis',\r\n        timestamp: Date.now(),\r\n      };\r\n\r\n      setResponses(prev => [response, ...prev]);\r\n      setQuery('');\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'An error occurred during analysis');\r\n      console.error('AI Analysis Error:', err);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  if (!config.ai?.enabled) {\r\n    return (\r\n      <div style={{ padding: 20, textAlign: 'center', color: '#666' }}>\r\n        AI features are disabled. Enable them in the configuration to use this feature.\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!aiService) {\r\n    return (\r\n      <div style={{ padding: 20, textAlign: 'center', color: '#666' }}>\r\n        AI service is not configured. Please provide an API key in the configuration.\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Container>\r\n      <QueryInput\r\n        value={query}\r\n        onChange={(e) => setQuery(e.target.value)}\r\n        placeholder=\"Ask about performance, errors, or request suggestions for improvements...\"\r\n      />\r\n      <Button\r\n        onClick={handleSubmit}\r\n        disabled={isLoading || !query.trim()}\r\n      >\r\n        {isLoading ? 'Analyzing...' : 'Analyze'}\r\n      </Button>\r\n\r\n      {error && (\r\n        <div style={{ color: '#dc2626', margin: '12px 0', padding: '8px', background: '#fee2e2', borderRadius: '4px' }}>\r\n          {error}\r\n        </div>\r\n      )}\r\n\r\n      <ResponseContainer>\r\n        {responses.map((response, index) => (\r\n          <ResponseCard key={index}>\r\n            <ResponseHeader>\r\n              <ResponseTitle>{response.title}</ResponseTitle>\r\n              <span style={{ fontSize: 12, color: '#666' }}>\r\n                {new Date(response.timestamp).toLocaleTimeString()}\r\n              </span>\r\n            </ResponseHeader>\r\n            <ResponseContent>\r\n              <div>{response.explanation}</div>\r\n              {response.suggestedFix && (\r\n                <CodeBlock>\r\n                  <SyntaxHighlighter\r\n                    language=\"typescript\"\r\n                    style={tomorrow}\r\n                    customStyle={{ margin: 0 }}\r\n                  >\r\n                    {response.suggestedFix}\r\n                  </SyntaxHighlighter>\r\n                </CodeBlock>\r\n              )}\r\n              {response.additionalContext && Object.entries(response.additionalContext).map(([key, value]) => (\r\n                <div key={key} style={{ marginTop: 12 }}>\r\n                  <h4 style={{ margin: '0 0 4px', fontSize: 13, color: '#666' }}>\r\n                    {key.charAt(0).toUpperCase() + key.slice(1)}\r\n                  </h4>\r\n                  <div>{value}</div>\r\n                </div>\r\n              ))}\r\n            </ResponseContent>\r\n          </ResponseCard>\r\n        ))}\r\n      </ResponseContainer>\r\n    </Container>\r\n  );\r\n}; "]}