{"version":3,"file":"ConsoleTab.js","sourceRoot":"","sources":["ConsoleTab.tsx"],"names":[],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport styled from '@emotion/styled';\r\nimport { Light as SyntaxHighlighter } from 'react-syntax-highlighter';\r\nimport { tomorrow } from 'react-syntax-highlighter/dist/esm/styles/prism';\r\nimport { useDebugContext } from '../DebugSuiteProvider';\r\nimport type { DebugLog } from '../../core/types';\r\n\r\nconst FilterBar = styled.div`\r\n  display: flex;\r\n  gap: 8px;\r\n  margin-bottom: 16px;\r\n`;\r\n\r\nconst FilterButton = styled.button<{ active: boolean }>`\r\n  padding: 4px 12px;\r\n  border: 1px solid ${({ theme }) => theme.colors.border};\r\n  border-radius: 4px;\r\n  background: ${({ active, theme }) =>\r\n    active ? theme.colors.primary : theme.colors.background};\r\n  color: ${({ active, theme }) =>\r\n    active ? 'white' : theme.colors.text};\r\n  cursor: pointer;\r\n  font-size: 12px;\r\n  transition: all 0.2s;\r\n\r\n  &:hover {\r\n    background: ${({ active, theme }) =>\r\n      active ? theme.colors.primary : theme.colors.hover};\r\n  }\r\n`;\r\n\r\nconst SearchInput = styled.input`\r\n  padding: 4px 12px;\r\n  border: 1px solid ${({ theme }) => theme.colors.border};\r\n  border-radius: 4px;\r\n  background: ${({ theme }) => theme.colors.background};\r\n  color: ${({ theme }) => theme.colors.text};\r\n  font-size: 12px;\r\n  flex: 1;\r\n\r\n  &:focus {\r\n    outline: none;\r\n    border-color: ${({ theme }) => theme.colors.primary};\r\n  }\r\n`;\r\n\r\nconst LogEntry = styled.div<{ type: string }>`\r\n  padding: 8px 12px;\r\n  border-bottom: 1px solid ${({ theme }) => theme.colors.border};\r\n  font-family: monospace;\r\n  font-size: 12px;\r\n  ${({ type, theme }) => {\r\n    switch (type) {\r\n      case 'ERROR':\r\n        return `color: ${theme.colors.error};`;\r\n      case 'WARN':\r\n        return `color: ${theme.colors.warning};`;\r\n      case 'INFO':\r\n        return `color: ${theme.colors.info};`;\r\n      default:\r\n        return `color: ${theme.colors.text};`;\r\n    }\r\n  }}\r\n\r\n  &:hover {\r\n    background: ${({ theme }) => theme.colors.hover};\r\n  }\r\n`;\r\n\r\nconst Timestamp = styled.span`\r\n  color: ${({ theme }) => theme.colors.secondary};\r\n  margin-right: 8px;\r\n`;\r\n\r\nconst Source = styled.span`\r\n  color: ${({ theme }) => theme.colors.primary};\r\n  margin-right: 8px;\r\n`;\r\n\r\nconst DataPreview = styled.div`\r\n  margin-top: 4px;\r\n  padding: 8px;\r\n  background: ${({ theme }) => theme.colors.tabBackground};\r\n  border-radius: 4px;\r\n`;\r\n\r\nexport const ConsoleTab: React.FC = () => {\r\n  const { debug } = useDebugContext();\r\n  const [logs, setLogs] = useState<DebugLog[]>([]);\r\n  const [filters, setFilters] = useState<Set<string>>(new Set());\r\n  const [search, setSearch] = useState('');\r\n  const [expandedLogs, setExpandedLogs] = useState<Set<number>>(new Set());\r\n\r\n  useEffect(() => {\r\n    const unsubscribe = debug.subscribe((log) => {\r\n      setLogs(prev => [log, ...prev]);\r\n    });\r\n\r\n    return unsubscribe;\r\n  }, [debug]);\r\n\r\n  const toggleFilter = (type: string) => {\r\n    const newFilters = new Set(filters);\r\n    if (newFilters.has(type)) {\r\n      newFilters.delete(type);\r\n    } else {\r\n      newFilters.add(type);\r\n    }\r\n    setFilters(newFilters);\r\n  };\r\n\r\n  const toggleExpanded = (index: number) => {\r\n    const newExpanded = new Set(expandedLogs);\r\n    if (newExpanded.has(index)) {\r\n      newExpanded.delete(index);\r\n    } else {\r\n      newExpanded.add(index);\r\n    }\r\n    setExpandedLogs(newExpanded);\r\n  };\r\n\r\n  const filteredLogs = logs.filter(log => {\r\n    if (filters.size > 0 && !filters.has(log.type)) return false;\r\n    if (search && !log.message.toLowerCase().includes(search.toLowerCase())) return false;\r\n    return true;\r\n  });\r\n\r\n  return (\r\n    <div>\r\n      <FilterBar>\r\n        <FilterButton\r\n          active={filters.has('ERROR')}\r\n          onClick={() => toggleFilter('ERROR')}\r\n        >\r\n          Errors\r\n        </FilterButton>\r\n        <FilterButton\r\n          active={filters.has('WARN')}\r\n          onClick={() => toggleFilter('WARN')}\r\n        >\r\n          Warnings\r\n        </FilterButton>\r\n        <FilterButton\r\n          active={filters.has('INFO')}\r\n          onClick={() => toggleFilter('INFO')}\r\n        >\r\n          Info\r\n        </FilterButton>\r\n        <SearchInput\r\n          placeholder=\"Search logs...\"\r\n          value={search}\r\n          onChange={(e) => setSearch(e.target.value)}\r\n        />\r\n      </FilterBar>\r\n\r\n      <div>\r\n        {filteredLogs.map((log, index) => (\r\n          <LogEntry\r\n            key={index}\r\n            type={log.type}\r\n            onClick={() => toggleExpanded(index)}\r\n          >\r\n            <Timestamp>{new Date(log.timestamp).toLocaleTimeString()}</Timestamp>\r\n            <Source>[{log.source}]</Source>\r\n            <span>{log.message}</span>\r\n            {expandedLogs.has(index) && log.data && (\r\n              <DataPreview>\r\n                <SyntaxHighlighter\r\n                  language=\"json\"\r\n                  style={tomorrow}\r\n                  customStyle={{ margin: 0 }}\r\n                >\r\n                  {JSON.stringify(log.data, null, 2)}\r\n                </SyntaxHighlighter>\r\n              </DataPreview>\r\n            )}\r\n          </LogEntry>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}; "]}