{"version":3,"file":"RequestDetails.test.js","sourceRoot":"","sources":["RequestDetails.test.tsx"],"names":[],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { render, screen, within } from '@testing-library/react';\r\nimport { ThemeProvider } from '@emotion/react';\r\nimport { RequestDetails } from '../components/network/RequestDetails';\r\nimport { NetworkRequest } from '../core/networkMonitor';\r\nimport { lightTheme } from '../components/styles/theme';\r\n\r\nconst mockRequest: NetworkRequest = {\r\n  id: '1',\r\n  url: 'https://api.example.com/users',\r\n  method: 'POST',\r\n  startTime: Date.now() - 5000,\r\n  endTime: Date.now() - 4800,\r\n  duration: 200,\r\n  status: 201,\r\n  statusText: 'Created',\r\n  initiator: 'fetch',\r\n  size: 1024,\r\n  requestHeaders: {\r\n    'content-type': 'application/json',\r\n    'authorization': 'Bearer token',\r\n  },\r\n  responseHeaders: {\r\n    'content-type': 'application/json',\r\n    'cache-control': 'no-cache',\r\n  },\r\n  requestBody: {\r\n    name: 'John Doe',\r\n    email: 'john@example.com',\r\n  },\r\n  responseBody: {\r\n    id: 123,\r\n    name: 'John Doe',\r\n    email: 'john@example.com',\r\n    createdAt: '2023-01-01T00:00:00Z',\r\n  },\r\n};\r\n\r\nconst mockErrorRequest: NetworkRequest = {\r\n  id: '2',\r\n  url: 'https://api.example.com/users/invalid',\r\n  method: 'GET',\r\n  startTime: Date.now() - 3000,\r\n  endTime: Date.now() - 2800,\r\n  duration: 200,\r\n  status: 404,\r\n  statusText: 'Not Found',\r\n  initiator: 'fetch',\r\n  error: new Error('Resource not found'),\r\n};\r\n\r\nconst renderRequestDetails = (request: NetworkRequest) => {\r\n  return render(\r\n    <ThemeProvider theme={lightTheme}>\r\n      <RequestDetails request={request} />\r\n    </ThemeProvider>\r\n  );\r\n};\r\n\r\ndescribe('RequestDetails', () => {\r\n  it('displays general request information', () => {\r\n    renderRequestDetails(mockRequest);\r\n\r\n    const generalSection = screen.getByRole('heading', { name: /General/i }).parentElement!;\r\n    expect(generalSection).toBeInTheDocument();\r\n\r\n    const grid = within(generalSection).getByRole('grid');\r\n    expect(within(grid).getByText(mockRequest.url)).toBeInTheDocument();\r\n    expect(within(grid).getByText(mockRequest.method)).toBeInTheDocument();\r\n    expect(within(grid).getByText(mockRequest.status!.toString())).toBeInTheDocument();\r\n    expect(within(grid).getByText('200ms')).toBeInTheDocument();\r\n    expect(within(grid).getByText('1.0KB')).toBeInTheDocument();\r\n    expect(within(grid).getByText(mockRequest.initiator)).toBeInTheDocument();\r\n  });\r\n\r\n  it('displays request headers', () => {\r\n    renderRequestDetails(mockRequest);\r\n\r\n    const headersSection = screen.getByRole('heading', { name: /Request Headers/i }).parentElement!;\r\n    expect(headersSection).toBeInTheDocument();\r\n\r\n    const grid = within(headersSection).getByRole('grid');\r\n    expect(within(grid).getByText(/^content-type:$/i)).toBeInTheDocument();\r\n    expect(within(grid).getByText('application/json')).toBeInTheDocument();\r\n    expect(within(grid).getByText(/^authorization:$/i)).toBeInTheDocument();\r\n    expect(within(grid).getByText('Bearer token')).toBeInTheDocument();\r\n  });\r\n\r\n  it('displays response headers', () => {\r\n    renderRequestDetails(mockRequest);\r\n\r\n    const headersSection = screen.getByRole('heading', { name: /Response Headers/i }).parentElement!;\r\n    expect(headersSection).toBeInTheDocument();\r\n\r\n    const grid = within(headersSection).getByRole('grid');\r\n    expect(within(grid).getByText(/^content-type:$/i)).toBeInTheDocument();\r\n    expect(within(grid).getByText('application/json')).toBeInTheDocument();\r\n    expect(within(grid).getByText(/^cache-control:$/i)).toBeInTheDocument();\r\n    expect(within(grid).getByText('no-cache')).toBeInTheDocument();\r\n  });\r\n\r\n  it('displays request body', () => {\r\n    renderRequestDetails(mockRequest);\r\n\r\n    const bodySection = screen.getByRole('heading', { name: /Request Body/i }).parentElement!;\r\n    expect(bodySection).toBeInTheDocument();\r\n\r\n    const codeBlock = within(bodySection).getByText((content) => \r\n      content.includes('\"name\": \"John Doe\"') && \r\n      content.includes('\"email\": \"john@example.com\"') &&\r\n      !content.includes('\"id\"') // Ensure we're not matching response body\r\n    );\r\n    expect(codeBlock).toBeInTheDocument();\r\n  });\r\n\r\n  it('displays response body', () => {\r\n    renderRequestDetails(mockRequest);\r\n\r\n    const bodySection = screen.getByRole('heading', { name: /Response Body/i }).parentElement!;\r\n    expect(bodySection).toBeInTheDocument();\r\n\r\n    const codeBlock = within(bodySection).getByText((content) => \r\n      content.includes('\"id\": 123') && \r\n      content.includes('\"name\": \"John Doe\"') && \r\n      content.includes('\"email\": \"john@example.com\"') &&\r\n      content.includes('\"createdAt\": \"2023-01-01T00:00:00Z\"')\r\n    );\r\n    expect(codeBlock).toBeInTheDocument();\r\n  });\r\n\r\n  it('displays error information for failed requests', () => {\r\n    renderRequestDetails(mockErrorRequest);\r\n\r\n    const errorSection = screen.getByRole('heading', { name: /Error/i }).parentElement!;\r\n    expect(errorSection).toBeInTheDocument();\r\n\r\n    const errorMessage = within(errorSection).getByText(/Resource not found/i);\r\n    expect(errorMessage).toBeInTheDocument();\r\n  });\r\n\r\n  it('formats request body as JSON when possible', () => {\r\n    const requestWithStringBody: NetworkRequest = {\r\n      ...mockRequest,\r\n      requestBody: JSON.stringify({ test: 'value' }),\r\n    };\r\n\r\n    renderRequestDetails(requestWithStringBody);\r\n    \r\n    const bodySection = screen.getByRole('heading', { name: /Request Body/i }).parentElement!;\r\n    const codeBlock = within(bodySection).getByText((content) => \r\n      content.includes('\"test\": \"value\"')\r\n    );\r\n    expect(codeBlock).toBeInTheDocument();\r\n  });\r\n\r\n  it('displays raw request body when not JSON', () => {\r\n    const requestWithRawBody: NetworkRequest = {\r\n      ...mockRequest,\r\n      requestBody: 'plain text content',\r\n    };\r\n\r\n    renderRequestDetails(requestWithRawBody);\r\n    \r\n    const bodySection = screen.getByRole('heading', { name: /Request Body/i }).parentElement!;\r\n    expect(within(bodySection).getByText('plain text content')).toBeInTheDocument();\r\n  });\r\n\r\n  it('handles missing optional fields', () => {\r\n    const minimalRequest: NetworkRequest = {\r\n      id: '3',\r\n      url: 'https://api.example.com/test',\r\n      method: 'GET',\r\n      startTime: Date.now(),\r\n      initiator: 'fetch',\r\n    };\r\n\r\n    renderRequestDetails(minimalRequest);\r\n\r\n    const generalSection = screen.getByRole('heading', { name: /General/i }).parentElement!;\r\n    const grid = within(generalSection).getByRole('grid');\r\n    \r\n    const naValues = within(grid).getAllByText('N/A');\r\n    expect(naValues).toHaveLength(2); // Duration and Size\r\n    expect(within(grid).getByText('Pending')).toBeInTheDocument(); // Status\r\n    \r\n    expect(screen.queryByRole('heading', { name: /Request Headers/i })).not.toBeInTheDocument();\r\n    expect(screen.queryByRole('heading', { name: /Response Headers/i })).not.toBeInTheDocument();\r\n    expect(screen.queryByRole('heading', { name: /Request Body/i })).not.toBeInTheDocument();\r\n    expect(screen.queryByRole('heading', { name: /Response Body/i })).not.toBeInTheDocument();\r\n  });\r\n}); "]}